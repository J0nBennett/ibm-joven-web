---
interface Props {
  id: string;
  titulo: string;
  fecha: string;
  hora: string;
  lugar: string;
  descripcion_md: string; // Using the raw MD as description for now or a snippet
  className?: string;
}

const { id, titulo, fecha, hora, lugar, descripcion_md, className = "" } = Astro.props;

const fechaObj = new Date(fecha + 'T12:00:00'); // Force noon to avoid timezone shifts on simple dates
const dia = fechaObj.getDate();
const mes = fechaObj.toLocaleDateString('es-AR', { month: 'short' }).toUpperCase();
---

<article class={`flex bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-100 overflow-hidden ${className}`}>
  <!-- Date Badge -->
  <div class="bg-blue-600 text-white flex flex-col items-center justify-center w-20 p-2 shrink-0 text-center">
    <span class="text-3xl font-bold leading-none">{dia}</span>
    <span class="text-xs font-medium tracking-wider">{mes}</span>
  </div>
  
  <div class="p-4 flex-grow">
    <h3 class="text-lg font-bold text-gray-900 leading-tight mb-1">{titulo}</h3>
    
    <div class="flex flex-wrap text-sm text-gray-500 gap-x-4 gap-y-1 mb-2">
      <div class="flex items-center">
        <span class="mr-1">üïí</span> {hora} hs
      </div>
      <div class="flex items-center">
        <span class="mr-1">üìç</span> {lugar}
      </div>
    </div>
    
    <p class="text-gray-600 text-sm line-clamp-2">
        {descripcion_md.replace(/[*_#]/g, '') /* Simple strip markdown */}
    </p>
  </div>
</article>
